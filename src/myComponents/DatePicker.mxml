<?xml version="1.0" encoding="utf-8"?>
<!--
copied from franto.com
-->										  
<!--
user wil enter a date
client needs to set currentDate, which is a timestamp in ms. User can only change year, month, date, but hour, minutes, seconds remains. ms will be set to zero
-->
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009"
		 xmlns:s="library://ns.adobe.com/flex/spark" xmlns:components="spark.components.*"
		 >
	<fx:Declarations>
		<s:DateTimeFormatter id="dayformatter" dateTimePattern="EEEE" useUTC="false" locale="{Capabilities.language.substr(0,2)}"/>
		<s:DateTimeFormatter id ="monthformatter" dateTimePattern="MMM" useUTC="false" locale="{Capabilities.language.substr(0,2)}"/>
	</fx:Declarations>
	<fx:Metadata>
		[ResourceBundle("general")]
	</fx:Metadata>
<fx:Script>
		<![CDATA[
			import mx.managers.PopUpManager;
			import mx.resources.ResourceManager;
			private var _currentDate: Date;
			[Bindable]
			public function get currentDate(): Date
			{
				return _currentDate;
			}
			public function set currentDate(value: Date): void
			{
				_currentDate = value;
				updateDateParts();
			}
			
			[Bindable]
			public var day: int;
			[Bindable]
			public var month: int;
			[Bindable]
			public var year: int;
			private var hour:int;
			private var minute:int;
			private var second:int;
			
			
			private function updateDateParts(): void
			{
				day = currentDate.date;
				month = currentDate.month;
				year = currentDate.fullYear;
				hour = currentDate.hours;
				minute = currentDate.minutes;
				second = currentDate.seconds;
			}
			private function incrementDate(type: String): void
			{
				updateDate(type, 1);
			}
			private function decrementDate(type: String): void
			{
				updateDate(type, -1);
			}
			private function updateDate(type: String, value: int): void
			{
				switch(type)
				{
					case 'day':
						day += value;
						break;
					case 'month':
						month += value;
						break;
					case 'year':
						year += value;
						break;
				}
				currentDate = new Date(year, month, day,hour,minute,second);
			}
			
			private function setDate(): void
			{
				var dpe: PickerEvent = new PickerEvent(PickerEvent.PICKER_SET);
				dpe.newValue = currentDate;
				dispatchEvent(dpe);
				PopUpManager.removePopUp(this);
			}
			private function cancelDate(): void
			{
				var dpe: PickerEvent = new PickerEvent(PickerEvent.PICKER_CANCEL);
				dispatchEvent(dpe);
				PopUpManager.removePopUp(this);
			}
			
			 
		]]>
	</fx:Script>
	<s:BorderContainer >
		
		<s:VGroup width="100%" gap="10" paddingBottom="10" paddingLeft="10" paddingRight="10" paddingTop="10">
			<s:Label text="{dayformatter.format(currentDate)}" width="100%" styleName="textColorInPickerOnDarkBackground"/>
			<s:Line width="100%">
				<s:stroke>
					<s:SolidColorStroke color="0xcccccc" weight="3"/>
				</s:stroke>
			</s:Line>
			<s:HGroup width="100%">
				<s:VGroup gap="10" >
					<s:Button label="+" minWidth="60" minHeight="60" click="incrementDate('day')" width="100%"/>
					<s:Label text="{day}" width="100%" textAlign="center" styleName="textColorInPickerOnDarkBackground"/>
					<s:Button label="-" minWidth="60" minHeight="60" click="decrementDate('day')" width="100%"/>
				</s:VGroup>
				<s:VGroup gap="10" >
					<s:Button label="+" minWidth="60" minHeight="60" click="incrementDate('month')" width="100%"/>
					<s:Label text="{monthformatter.format(currentDate)}" width="100%" textAlign="center" styleName="textColorInPickerOnDarkBackground"/>
					<s:Button label="-" minWidth="60" minHeight="60" click="decrementDate('month')" width="100%"/>
				</s:VGroup>
				<s:VGroup gap="10" >
					<s:Button label="+" minWidth="60" minHeight="60" click="incrementDate('year')" width="100%"/>
					<s:Label text="{year}" width="100%" textAlign="center" styleName="textColorInPickerOnDarkBackground"/>
					<s:Button label="-" minWidth="60" minHeight="60" click="decrementDate('year')" width="100%"/>
				</s:VGroup>
			</s:HGroup>
			<s:BorderContainer width="100%" backgroundColor="0xcccccc">
				<s:VGroup width="100%" verticalAlign="middle" paddingTop="0" paddingBottom="0" paddingLeft="0" paddingRight="0">
					<s:Button width="100%" height="50%" minHeight="60" label="{resourceManager.getStringArray('general','ok')}" click="setDate()"/>
					<s:Button width="100%" height="50%" minHeight="60" label="{resourceManager.getStringArray('general','cancel')}" click="cancelDate()"/>
				</s:VGroup>
			</s:BorderContainer>
		</s:VGroup>
	</s:BorderContainer>
</s:Group>
